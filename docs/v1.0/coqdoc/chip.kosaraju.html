<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">chip.kosaraju</h1>

<div class="code">
<span class="id" title="var">From</span> <span class="id" title="var">mathcomp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">all_ssreflect</span>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">chip</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="chip.extra.html#"><span class="id" title="library">extra</span></a> <a class="idref" href="chip.connect.html#"><span class="id" title="library">connect</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Strict</span> <span class="id" title="keyword">Implicit</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Printing</span> <span class="id" title="keyword">Implicit</span> <span class="id" title="var">Defensive</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Kosaraju"><span class="id" title="section">Kosaraju</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variable</span> <a name="Kosaraju.T"><span class="id" title="variable">T</span></a> : <span class="id" title="abbreviation">finType</span>.<br/>

<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">s</span> : <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">}</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Kosaraju.Pdfs"><span class="id" title="section">Pdfs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variable</span> <a name="Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a> : <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">seq</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="rpdfs"><span class="id" title="definition">rpdfs</span></a> <span class="id" title="var">m</span> (<span class="id" title="var">p</span> : <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">}</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="abbreviation">seq</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>) <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">if</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">notin</span></a> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">then</span></a> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="chip.kosaraju.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">m1</span><span class="id" title="notation">.+1</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p1</span> := <span class="id" title="definition">foldl</span> (<a class="idref" href="chip.kosaraju.html#rpdfs"><span class="id" title="definition">rpdfs</span></a> <span class="id" title="var">m1</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a> <span class="id" title="notation">:\</span> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#p1"><span class="id" title="variable">p1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">::</span> <a class="idref" href="chip.kosaraju.html#p1"><span class="id" title="variable">p1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="pdfs"><span class="id" title="definition">pdfs</span></a> := <a class="idref" href="chip.kosaraju.html#rpdfs"><span class="id" title="definition">rpdfs</span></a> <span class="id" title="notation">#|</span><a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">|</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="tseq"><span class="id" title="definition">tseq</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">(</span></a><span class="id" title="definition">foldl</span> <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">setT</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">[::]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<span class="id" title="abbreviation">enum</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">).2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x -[ l ]-&gt; y" :=<br/>
&nbsp;&nbsp;(<span class="id" title="definition">connect</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#rel_of_simpl_rel"><span class="id" title="definition">rel_of_simpl_rel</span></a> (<a class="idref" href="chip.extra.html#relto"><span class="id" title="definition">relto</span></a> <span class="id" title="var">l</span> (<span class="id" title="definition">grel</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a>))) <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "x  -[ l ]-&gt;  y").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x -[]-&gt; y" := (<span class="id" title="definition">connect</span> (<span class="id" title="definition">grel</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "x  -[]-&gt;  y").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x =[ l ]= y" := (<a class="idref" href="chip.connect.html#diconnect"><span class="id" title="definition">diconnect</span></a> (<a class="idref" href="chip.extra.html#relto"><span class="id" title="definition">relto</span></a> <span class="id" title="var">l</span> (<span class="id" title="definition">grel</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a>)) <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "x  =[ l ]=  y").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x =[]= y" := (<a class="idref" href="chip.connect.html#diconnect"><span class="id" title="definition">diconnect</span></a> (<span class="id" title="definition">grel</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "x  =[]=  y").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "TS[ a , l ]" := (<a class="idref" href="chip.connect.html#tsorted"><span class="id" title="definition">tsorted</span></a> (<span class="id" title="definition">grel</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a>) <span class="id" title="var">a</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "TS[ a ,  l ]").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "TS[ l ]" := (<a class="idref" href="chip.connect.html#tsorted"><span class="id" title="definition">tsorted</span></a> (<span class="id" title="definition">grel</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#pred_of_simpl"><span class="id" title="definition">pred_of_simpl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#predT"><span class="id" title="definition">predT</span></a>) <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "TS[ l ]").<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="pdfs_correct'"><span class="id" title="lemma">pdfs_correct'</span></a> (<span class="id" title="var">p</span> : <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">}</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="abbreviation">seq</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>) <span class="id" title="var">x</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">s</span>, <span class="id" title="var">l</span>) := <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;<span class="id" title="definition">uniq</span> <a class="idref" href="chip.kosaraju.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <a class="idref" href="chip.kosaraju.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="notation">~:</span> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p1</span> := <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">s1</span>, <span class="id" title="var">l1</span>) := <a class="idref" href="chip.kosaraju.html#p1"><span class="id" title="variable">p1</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">if</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">notin</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">then</span></a> <a class="idref" href="chip.kosaraju.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">[/\</span></a> <span class="id" title="notation">#|</span><a class="idref" href="chip.kosaraju.html#s1"><span class="id" title="variable">s1</span></a><span class="id" title="notation">|</span> <span class="id" title="notation">&lt;=</span> <span class="id" title="notation">#|</span><a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">&amp;</span></a> <span class="id" title="definition">uniq</span> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">l2</span> : <span class="id" title="abbreviation">seq</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">[/\</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">:\:</span> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">y</span> <span class="id" title="notation">in</span> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><span class="id" title="notation">]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="chip.kosaraju.html#l"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="chip.kosaraju.html#af52256a9723fdf4f138faf890d8add6"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#af52256a9723fdf4f138faf890d8add6"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">pred</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">]</span></a><a class="idref" href="chip.kosaraju.html#af52256a9723fdf4f138faf890d8add6"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><a class="idref" href="chip.kosaraju.html#af52256a9723fdf4f138faf890d8add6"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="chip.kosaraju.html#7bf93e073408ab548f459d348823a89c"><span class="id" title="notation">-[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">pred</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">]</span></a><a class="idref" href="chip.kosaraju.html#7bf93e073408ab548f459d348823a89c"><span class="id" title="notation">]-&gt;</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">rewrite</span> /<a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a>.<br/>
<span class="id" title="var">have</span>: <span class="id" title="notation">#|</span><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><span class="id" title="notation">|</span> <span class="id" title="notation">&lt;=</span> <span class="id" title="notation">#|</span><a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">|</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">subset_leq_card</span>/<span class="id" title="lemma">subsetP</span>=&gt; <span class="id" title="var">i</span>.<br/>
<span class="id" title="tactic">elim</span>: <span class="id" title="notation">#|</span><a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">|</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span> =&gt; /= [<span class="id" title="var">x</span> [<span class="id" title="var">s</span> <span class="id" title="var">l</span>]|<span class="id" title="var">n</span> <span class="id" title="var">IH</span> <span class="id" title="var">x</span> [<span class="id" title="var">s</span> <span class="id" title="var">l</span>]]/=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">leqn0</span> =&gt; /<span class="id" title="lemma">eqP</span>/<span class="id" title="lemma">cards0_eq</span>-&gt; [<span class="id" title="var">HUl</span> <span class="id" title="var">HS</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
<span class="id" title="var">have</span> [<span class="id" title="var">xIs</span> <span class="id" title="var">Hl</span> [<span class="id" title="var">HUl</span> <span class="id" title="var">HS</span>]/=|<span class="id" title="var">xNIs</span> <span class="id" title="var">Hl</span> [<span class="id" title="var">HUl</span> <span class="id" title="var">HS</span>]//] := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#boolP"><span class="id" title="lemma">boolP</span></a> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s</span>).<br/>
<span class="id" title="tactic">set</span> <span class="id" title="var">p</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">set</span> <span class="id" title="var">F</span> := <a class="idref" href="chip.kosaraju.html#rpdfs"><span class="id" title="definition">rpdfs</span></a> <span class="id" title="var">_</span>; <span class="id" title="tactic">set</span> <span class="id" title="var">L</span> := <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a> <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">have</span>: <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">[/\</span></a> <span class="id" title="notation">#|</span><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><span class="id" title="notation">|</span> <span class="id" title="notation">&lt;</span> <span class="id" title="notation">#|</span><span class="id" title="var">s</span><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">&amp;</span></a> <span class="id" title="definition">uniq</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">l2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">[/\</span></a>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">notin</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><span class="id" title="var">s</span> <span class="id" title="notation">:\</span> <span class="id" title="var">x</span><span class="id" title="notation">)</span> <span class="id" title="notation">:\:</span> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">z</span> <span class="id" title="notation">in</span> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><span class="id" title="notation">]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a> <span class="id" title="notation">++</span> <span class="id" title="var">l</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#af52256a9723fdf4f138faf890d8add6"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#af52256a9723fdf4f138faf890d8add6"><span class="id" title="notation">[</span></a><span class="id" title="notation">[</span><span class="id" title="notation">predD1</span> <span class="id" title="var">s</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span><span class="id" title="notation">]</span><a class="idref" href="chip.kosaraju.html#af52256a9723fdf4f138faf890d8add6"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><a class="idref" href="chip.kosaraju.html#af52256a9723fdf4f138faf890d8add6"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span> <a class="idref" href="chip.kosaraju.html#7bf93e073408ab548f459d348823a89c"><span class="id" title="notation">-[</span></a><span class="id" title="notation">[</span><span class="id" title="notation">predD1</span> <span class="id" title="var">s</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span><span class="id" title="notation">]</span><a class="idref" href="chip.kosaraju.html#7bf93e073408ab548f459d348823a89c"><span class="id" title="notation">]-&gt;</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span> =&gt; // | <span class="id" title="tactic">exists</span> <span class="id" title="notation">[::]</span>; <span class="id" title="tactic">split</span> =&gt; //=].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">p</span> /= [<span class="id" title="notation">#|</span><span class="id" title="var">s</span><span class="id" title="notation">|</span>](<span class="id" title="lemma">cardsD1</span> <span class="id" title="var">x</span>) <span class="id" title="var">xIs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> <span class="id" title="abbreviation">eqxx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">setD0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span>: <a class="idref" href="chip.connect.html#tsorted_nil"><span class="id" title="lemma">tsorted_nil</span></a>.<br/>
<span class="id" title="var">have</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, (<span class="id" title="definition">grel</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a>) <span class="id" title="var">x</span> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">notin</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">L</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">y</span>; <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbC"><span class="id" title="lemma">orbC</span></a> =&gt; -&gt;.<br/>
<span class="id" title="var">have</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">L</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> (<span class="id" title="definition">grel</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a>) <span class="id" title="var">x</span> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">y</span>.<br/>
<span class="id" title="tactic">rewrite</span> {}/<span class="id" title="var">p</span>.<br/>
<span class="id" title="tactic">elim</span>: <span class="id" title="var">L</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">s1</span> <span class="id" title="var">l1</span>] /= <span class="id" title="var">_</span> <span class="id" title="var">yIp</span> [[<span class="id" title="var">sSs1</span> <span class="id" title="var">Ul1</span>] [<span class="id" title="var">l2</span> [<span class="id" title="var">xIs1</span> <span class="id" title="var">s1E</span> <span class="id" title="var">l1E</span> <span class="id" title="var">Rwl2</span> <span class="id" title="var">xCy</span>]]]|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span> <span class="id" title="var">l'</span> <span class="id" title="var">IH1</span> [<span class="id" title="var">s1</span> <span class="id" title="var">l1</span>] /= <span class="id" title="var">Rx</span> <span class="id" title="var">yIp</span> [[<span class="id" title="var">sSs1</span> <span class="id" title="var">Ul1</span>] [<span class="id" title="var">l2</span> [<span class="id" title="var">xIs1</span> <span class="id" title="var">s1E</span> <span class="id" title="var">l1E</span> <span class="id" title="var">Rwl2</span> <span class="id" title="var">xCy</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span>=&gt; // |<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> <span class="id" title="notation">::</span> <span class="id" title="var">l2</span>); <span class="id" title="tactic">split</span>] =&gt; // [||||||<span class="id" title="var">y</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">subset_leqif_cards</span> // <span class="id" title="var">s1E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="lemma">subset_trans</span> (<span class="id" title="lemma">subsetDl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<span class="id" title="lemma">subD1set</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ul1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbT"><span class="id" title="lemma">andbT</span></a> <span class="id" title="var">l1E</span> <span class="id" title="lemma">mem_cat</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_or"><span class="id" title="lemma">negb_or</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> [/= <span class="id" title="var">Dl2</span> <span class="id" title="var">_</span>] := <span class="id" title="var">Rwl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> /<span class="id" title="lemma">subsetP</span>/(<span class="id" title="var">_</span> <span class="id" title="var">x</span>)/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#implyP"><span class="id" title="lemma">implyP</span></a>/=  := <span class="id" title="var">Dl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> /= <span class="id" title="abbreviation">eqxx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#implybF"><span class="id" title="lemma">implybF</span></a> =&gt; -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span>  /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#implyP"><span class="id" title="lemma">implyP</span></a> := <span class="id" title="var">HS</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> <span class="id" title="var">xIs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#implybF"><span class="id" title="lemma">implybF</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> <span class="id" title="abbreviation">eqxx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span> =&gt; <span class="id" title="var">z</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_or"><span class="id" title="lemma">negb_or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbC"><span class="id" title="lemma">andbC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbAC"><span class="id" title="lemma">andbAC</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#tsorted_cons_r"><span class="id" title="lemma">tsorted_cons_r</span></a> =&gt; // [<span class="id" title="var">y</span> <span class="id" title="var">yInl2</span>|<span class="id" title="var">y</span> /<span class="id" title="var">yIp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="chip.connect.html#connect_to_C1_id"><span class="id" title="lemma">connect_to_C1_id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="lemma">eq_connect</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#aed478b27f23b4f753c27c8ac393febc"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#c717e24548d7d4d1086535addc681262"><span class="id" title="notation">=2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#c717e24548d7d4d1086535addc681262"><span class="id" title="notation">(</span></a><a class="idref" href="chip.extra.html#relto"><span class="id" title="definition">relto</span></a> <span class="id" title="notation">[</span><span class="id" title="notation">predD1</span> <span class="id" title="var">s</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span><span class="id" title="notation">]</span> (<span class="id" title="definition">grel</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs.successors"><span class="id" title="variable">successors</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#c717e24548d7d4d1086535addc681262"><span class="id" title="notation">)</span></a>)) ?<span class="id" title="var">xCy</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">x1</span> <span class="id" title="var">y1</span>; <span class="id" title="tactic">rewrite</span> /= !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbA"><span class="id" title="lemma">andbA</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbF"><span class="id" title="lemma">orbF</span></a> <span class="id" title="var">s1E</span> 3!<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_and"><span class="id" title="lemma">negb_and</span></a> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negbK"><span class="id" title="lemma">negbK</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_and"><span class="id" title="lemma">negb_and</span></a> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[] /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negPf"><span class="id" title="lemma">negPf</span></a>-&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|<span class="id" title="var">yIl2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="lemma">connect0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#connect_to_sub"><span class="id" title="lemma">connect_to_sub</span></a> (<span class="id" title="var">xCy</span> <span class="id" title="var">_</span> <span class="id" title="var">yIl2</span>); <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">subsetP</span> =&gt; <span class="id" title="var">i</span> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
<span class="id" title="var">have</span> <span class="id" title="var">F1</span> : <span class="id" title="notation">#|</span><span class="id" title="var">s1</span><span class="id" title="notation">|</span> <span class="id" title="notation">&lt;=</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">ltnS</span> (<span class="id" title="lemma">leq_trans</span> <span class="id" title="var">_</span> <span class="id" title="var">Hl</span>).<br/>
<span class="id" title="var">have</span> <span class="id" title="var">F2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="notation">~:</span> <span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> <span class="id" title="lemma">mem_cat</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[-&gt;//|/<span class="id" title="var">HS</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negPf"><span class="id" title="lemma">negPf</span></a>-&gt;; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbF"><span class="id" title="lemma">andbF</span></a>.<br/>
<span class="id" title="var">have</span> := <span class="id" title="var">IH</span> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">F1</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Ul1</span> <span class="id" title="var">F2</span>).<br/>
<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">F</span> /=; <span class="id" title="tactic">case</span>: <a class="idref" href="chip.kosaraju.html#rpdfs"><span class="id" title="definition">rpdfs</span></a> =&gt; <span class="id" title="var">s3</span> <span class="id" title="var">l3</span> /= <span class="id" title="var">Hv</span>.<br/>
<span class="id" title="tactic">apply</span>: <span class="id" title="var">IH1</span> =&gt; [<span class="id" title="var">z</span> <span class="id" title="var">zIl</span>|<span class="id" title="var">z</span> <span class="id" title="var">Rxz</span> /=|]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="var">Rx</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> <span class="id" title="var">zIl</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#boolP"><span class="id" title="lemma">boolP</span></a> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s1</span>)) <span class="id" title="var">Hv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">yIs1</span>/= [[<span class="id" title="var">Ss1s3</span> <span class="id" title="var">Ul3</span>] [<span class="id" title="var">l4</span> [<span class="id" title="var">yIl4</span> <span class="id" title="var">s3E</span> <span class="id" title="var">l3E</span> <span class="id" title="var">Rwl4</span> <span class="id" title="var">Cyz</span>]]]<br/>
       |<span class="id" title="var">yNIs1</span>/= [-&gt; <span class="id" title="var">_</span>]]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>: (<span class="id" title="var">yIp</span> <span class="id" title="var">_</span> <span class="id" title="var">Rxz</span>) =&gt; [-&gt;//|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|-&gt;]; [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">yNIs1</span>|<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">s3E</span> !<span class="id" title="definition">inE</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_and"><span class="id" title="lemma">negb_and</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>: (<span class="id" title="var">yIp</span> <span class="id" title="var">_</span> <span class="id" title="var">Rxz</span>) =&gt; [-&gt;//|]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|-&gt;]; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">yIl4</span>.<br/>
<span class="id" title="tactic">case</span>: (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#boolP"><span class="id" title="lemma">boolP</span></a> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s1</span>)) <span class="id" title="var">Hv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">yIs1</span> [[<span class="id" title="var">Ss1s3</span> <span class="id" title="var">Ul3</span>] [<span class="id" title="var">l4</span> [<span class="id" title="var">yIl4</span> <span class="id" title="var">s3E</span> <span class="id" title="var">l3E</span> <span class="id" title="var">Rwl4</span> <span class="id" title="var">Cyz</span>]]]<br/>
      |<span class="id" title="var">yNIs1</span> [-&gt; -&gt;]]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>=&gt; //; <span class="id" title="tactic">exists</span> <span class="id" title="var">l2</span>; <span class="id" title="tactic">split</span>.<br/>
<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span>=&gt; //= | <span class="id" title="tactic">exists</span> (<span class="id" title="var">l4</span> <span class="id" title="notation">++</span> <span class="id" title="var">l2</span>); <span class="id" title="tactic">split</span> =&gt; //= [||||<span class="id" title="var">z</span>]].<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="lemma">leq_ltn_trans</span> <span class="id" title="var">Ss1s3</span> <span class="id" title="var">_</span>.<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s3E</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> <span class="id" title="abbreviation">eqxx</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbF"><span class="id" title="lemma">andbF</span></a>.<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span> =&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s3E</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> <span class="id" title="lemma">mem_cat</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_or"><span class="id" title="lemma">negb_or</span></a> -!<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbA"><span class="id" title="lemma">andbA</span></a>.<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l3E</span> <span class="id" title="var">l1E</span> <span class="id" title="lemma">catA</span>.<br/>
- <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#tsorted_cat"><span class="id" title="lemma">tsorted_cat</span></a> =&gt; //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#eq_tsorted"><span class="id" title="lemma">eq_tsorted</span></a> <span class="id" title="var">Rwl4</span> =&gt; <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">mem_cat</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[] <span class="id" title="var">zIl4</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="var">xCy</span>.<br/>
<span class="id" title="tactic">apply</span>: <span class="id" title="lemma">connect_trans</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#aed478b27f23b4f753c27c8ac393febc"><span class="id" title="notation">:</span></a> <span class="id" title="var">y</span> <a class="idref" href="chip.kosaraju.html#7bf93e073408ab548f459d348823a89c"><span class="id" title="notation">-[</span></a><span class="id" title="var">_</span><a class="idref" href="chip.kosaraju.html#7bf93e073408ab548f459d348823a89c"><span class="id" title="notation">]-&gt;</span></a> <span class="id" title="var">z</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#connect_to_sub"><span class="id" title="lemma">connect_to_sub</span></a> (<span class="id" title="var">Cyz</span> <span class="id" title="var">_</span> <span class="id" title="var">zIl4</span>); <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">subsetP</span> =&gt; <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#connect_to1"><span class="id" title="lemma">connect_to1</span></a> (<span class="id" title="var">Rx</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> ?<span class="id" title="abbreviation">eqxx</span> //.<br/>
<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">yIs1</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span>=&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a>[<span class="id" title="var">_</span> -&gt;].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="pdfs_connect'"><span class="id" title="lemma">pdfs_connect'</span></a> <span class="id" title="var">s</span> <span class="id" title="var">x</span> : <br/>
&nbsp;&nbsp;<a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">s1</span>, <span class="id" title="var">l1</span>) := <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">[::]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">[/\</span></a> <span class="id" title="definition">uniq</span> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">:\:</span> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">z</span> <span class="id" title="notation">in</span> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a><span class="id" title="notation">]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">subset</span> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="chip.kosaraju.html#7bf93e073408ab548f459d348823a89c"><span class="id" title="notation">-[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">pred</span></a> <span class="id" title="var">u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">]</span></a><a class="idref" href="chip.kosaraju.html#7bf93e073408ab548f459d348823a89c"><span class="id" title="notation">]-&gt;</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">xIs</span>.<br/>
<span class="id" title="tactic">set</span> <span class="id" title="var">p</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="var">have</span> <span class="id" title="var">UN</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">[/\</span></a> <span class="id" title="definition">uniq</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="notation">~:</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">by</span> [].<br/>
<span class="id" title="tactic">case</span>: <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> (<a class="idref" href="chip.kosaraju.html#pdfs_correct'"><span class="id" title="lemma">pdfs_correct'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">x</span> <span class="id" title="var">UN</span>) =&gt; <span class="id" title="var">s1</span> <span class="id" title="var">l1</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">xIs</span> =&gt; /=[[[<span class="id" title="var">_</span> <span class="id" title="var">Ul1</span>] [<span class="id" title="var">l2</span> [<span class="id" title="var">xIl2</span> <span class="id" title="var">s1E</span> <span class="id" title="var">l1E</span> <span class="id" title="var">WH</span> <span class="id" title="var">Cy</span>]]]].<br/>
<span class="id" title="tactic">split</span> =&gt; // [||<span class="id" title="var">y</span>].<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s1E</span> <span class="id" title="var">l1E</span> !<span class="id" title="definition">inE</span> <span class="id" title="lemma">cats0</span>.<br/>
- <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">subsetP</span>=&gt; <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span> <span class="id" title="lemma">cats0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">have</span> [/<span class="id" title="lemma">subsetP</span>/(<span class="id" title="var">_</span> <span class="id" title="var">z</span>)/=] := <span class="id" title="var">WH</span>.<br/>
<span class="id" title="tactic">apply</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a>/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a> =&gt; [|<span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span> <span class="id" title="lemma">cats0</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">Cy</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span> <span class="id" title="lemma">cats0</span>.<br/>
<span class="id" title="tactic">by</span> <span class="id" title="var">have</span> [<span class="id" title="var">_</span> /(<span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">xIl2</span> <span class="id" title="var">H</span>)] := <span class="id" title="var">WH</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;sequence&nbsp;is&nbsp;topologically&nbsp;sorted&nbsp;and&nbsp;contains&nbsp;all&nbsp;the&nbsp;nodes&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a name="tseq_correct'"><span class="id" title="lemma">tseq_correct'</span></a> : <a class="idref" href="chip.kosaraju.html#2069e44591c4495b21a1437780629092"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#2069e44591c4495b21a1437780629092"><span class="id" title="notation">[</span></a><a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a><a class="idref" href="chip.kosaraju.html#2069e44591c4495b21a1437780629092"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">suff</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">[/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">setT</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#aed478b27f23b4f753c27c8ac393febc"><span class="id" title="notation">:</span></a> <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">}</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">[::]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="chip.kosaraju.html#2069e44591c4495b21a1437780629092"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#2069e44591c4495b21a1437780629092"><span class="id" title="notation">[</span></a><a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a><a class="idref" href="chip.kosaraju.html#2069e44591c4495b21a1437780629092"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>, <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">enum</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a>  <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>=&gt; <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">split</span> =&gt; // <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> // <span class="id" title="lemma">mem_enum</span>.<br/>
<span class="id" title="tactic">rewrite</span> /<a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a>; <span class="id" title="tactic">set</span> <span class="id" title="var">F</span> := <span class="id" title="definition">foldl</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">set</span> <span class="id" title="var">p</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="var">have</span> : <a class="idref" href="chip.kosaraju.html#2069e44591c4495b21a1437780629092"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#2069e44591c4495b21a1437780629092"><span class="id" title="notation">[</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><a class="idref" href="chip.kosaraju.html#2069e44591c4495b21a1437780629092"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#tsorted_nil"><span class="id" title="lemma">tsorted_nil</span></a>.<br/>
<span class="id" title="var">have</span>: <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">~:</span> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">x</span> <span class="id" title="notation">in</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> /= !<span class="id" title="definition">inE</span>.<br/>
<span class="id" title="var">have</span>: <span class="id" title="definition">uniq</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <span class="id" title="tactic">by</span> [].<br/>
<span class="id" title="tactic">elim</span>: (<span class="id" title="abbreviation">enum</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>) <span class="id" title="var">p</span> =&gt; /= [|<span class="id" title="var">y</span> <span class="id" title="var">l</span> <span class="id" title="var">IH</span> [<span class="id" title="var">s1</span> <span class="id" title="var">l1</span>] <span class="id" title="var">HUl1</span> /= <span class="id" title="var">Hi</span> <span class="id" title="var">Rw</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>.<br/>
<span class="id" title="var">have</span> <span class="id" title="var">HS</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="notation">~:</span> <span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hi</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negbK"><span class="id" title="lemma">negbK</span></a>.<br/>
<span class="id" title="var">have</span> :=  <a class="idref" href="chip.kosaraju.html#pdfs_correct'"><span class="id" title="lemma">pdfs_correct'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">y</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">HUl1</span> <span class="id" title="var">HS</span>).<br/>
<span class="id" title="var">have</span> [<span class="id" title="var">yIs1</span>|<span class="id" title="var">yNIs1</span>] := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#boolP"><span class="id" title="lemma">boolP</span></a> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s1</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> =&gt; <span class="id" title="var">s2</span> <span class="id" title="var">l2</span> [-&gt; -&gt;].<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> /= [<span class="id" title="var">Sl2</span> <span class="id" title="var">HR</span> <span class="id" title="var">xI</span>] := <span class="id" title="var">IH</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">HUl1</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Rw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> =&gt; // <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|<span class="id" title="var">xIl</span>]; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="var">xI</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <span class="id" title="var">Sl2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">yNIs1</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hi</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negbK"><span class="id" title="lemma">negbK</span></a>.<br/>
<span class="id" title="tactic">case</span>: <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> =&gt; <span class="id" title="var">s2</span> <span class="id" title="var">l2</span> /= [[<span class="id" title="var">Ss1s2</span> <span class="id" title="var">Ul2</span>] [<span class="id" title="var">l3</span> [<span class="id" title="var">yIl3</span> <span class="id" title="var">s2E</span> <span class="id" title="var">l2E</span> <span class="id" title="var">RWl3</span> <span class="id" title="var">Cyz</span>]]].<br/>
<span class="id" title="tactic">case</span>: (<span class="id" title="var">IH</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) =&gt; //= [|| <span class="id" title="var">Sl2F</span> <span class="id" title="var">RwF</span> <span class="id" title="var">FI</span>].<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s2E</span> <span class="id" title="var">Hi</span> <span class="id" title="var">l2E</span> !<span class="id" title="definition">inE</span> <span class="id" title="lemma">mem_cat</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_or"><span class="id" title="lemma">negb_or</span></a>.<br/>
- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l2E</span>; <span class="id" title="tactic">apply</span>: (<a class="idref" href="chip.connect.html#tsorted_cat"><span class="id" title="lemma">tsorted_cat</span></a> <span class="id" title="var">Rw</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#eq_tsorted"><span class="id" title="lemma">eq_tsorted</span></a> <span class="id" title="var">RWl3</span> =&gt; <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">Hi</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbT"><span class="id" title="lemma">andbT</span></a>.<br/>
<span class="id" title="tactic">split</span>=&gt; // [<span class="id" title="var">i</span> <span class="id" title="var">iIl1</span>|<span class="id" title="var">x</span>]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Sl2F</span> // <span class="id" title="var">l2E</span> <span class="id" title="lemma">mem_cat</span> <span class="id" title="var">iIl1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|//]; <span class="id" title="var">last</span> <span class="id" title="tactic">exact</span>: <span class="id" title="var">FI</span>.<br/>
<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="var">Sl2F</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l2E</span> <span class="id" title="lemma">mem_cat</span> <span class="id" title="var">yIl3</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Pdfs"><span class="id" title="section">Pdfs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Kosaraju.Stack"><span class="id" title="section">Stack</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variable</span> <a name="Kosaraju.Stack.r"><span class="id" title="variable">r</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x -[ l ]-&gt; y" := <br/>
&nbsp;&nbsp;(<span class="id" title="definition">connect</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#rel_of_simpl_rel"><span class="id" title="definition">rel_of_simpl_rel</span></a> (<a class="idref" href="chip.extra.html#relto"><span class="id" title="definition">relto</span></a> <span class="id" title="var">l</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a>)) <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "x  -[ l ]-&gt;  y").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x -[]-&gt; y" := (<span class="id" title="definition">connect</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "x  -[]-&gt;  y").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x =[ l ]= y" := (<a class="idref" href="chip.connect.html#diconnect"><span class="id" title="definition">diconnect</span></a> (<a class="idref" href="chip.extra.html#relto"><span class="id" title="definition">relto</span></a> <span class="id" title="var">l</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a>) <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "x  =[ l ]=  y").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "x =[]= y" := (<a class="idref" href="chip.connect.html#diconnect"><span class="id" title="definition">diconnect</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "x  =[]=  y").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "TS[ a , l ]" := (<a class="idref" href="chip.connect.html#tsorted"><span class="id" title="definition">tsorted</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a> <span class="id" title="var">a</span> <span class="id" title="var">l</span>) <br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "TS[ a ,  l ]").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "TS[ l ]" := (<a class="idref" href="chip.connect.html#tsorted"><span class="id" title="definition">tsorted</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#pred_of_simpl"><span class="id" title="definition">pred_of_simpl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#predT"><span class="id" title="definition">predT</span></a>) <span class="id" title="var">l</span>) <br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">format</span> "TS[ l ]").<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="pdfs_correct"><span class="id" title="lemma">pdfs_correct</span></a> (<span class="id" title="var">p</span> : <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">}</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="abbreviation">seq</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>) <span class="id" title="var">x</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">s</span>, <span class="id" title="var">l</span>) := <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;<span class="id" title="definition">uniq</span> <a class="idref" href="chip.kosaraju.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <a class="idref" href="chip.kosaraju.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="notation">~:</span> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p1</span> := <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a>) <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">s1</span>, <span class="id" title="var">l1</span>) := <a class="idref" href="chip.kosaraju.html#p1"><span class="id" title="variable">p1</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">if</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">notin</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">then</span></a> <a class="idref" href="chip.kosaraju.html#p1"><span class="id" title="variable">p1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">[/\</span></a> <span class="id" title="notation">#|</span><a class="idref" href="chip.kosaraju.html#s1"><span class="id" title="variable">s1</span></a><span class="id" title="notation">|</span> <span class="id" title="notation">&lt;=</span> <span class="id" title="notation">#|</span><a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">&amp;</span></a> <span class="id" title="definition">uniq</span> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">l2</span> : <span class="id" title="abbreviation">seq</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">[/\</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">:\:</span> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">y</span> <span class="id" title="notation">in</span> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><span class="id" title="notation">]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a> <span class="id" title="notation">++</span> <a class="idref" href="chip.kosaraju.html#l"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="chip.kosaraju.html#9d4b406f2baf3b916e4bed76250edf1e"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#9d4b406f2baf3b916e4bed76250edf1e"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">pred</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">]</span></a><a class="idref" href="chip.kosaraju.html#9d4b406f2baf3b916e4bed76250edf1e"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><a class="idref" href="chip.kosaraju.html#9d4b406f2baf3b916e4bed76250edf1e"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="chip.kosaraju.html#15923649c609b9fa64e0d7caffe99726"><span class="id" title="notation">-[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">pred</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">]</span></a><a class="idref" href="chip.kosaraju.html#15923649c609b9fa64e0d7caffe99726"><span class="id" title="notation">]-&gt;</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">rewrite</span> /<a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a>.<br/>
<span class="id" title="var">have</span>: <span class="id" title="notation">#|</span><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><span class="id" title="notation">|</span> <span class="id" title="notation">&lt;=</span> <span class="id" title="notation">#|</span><a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">|</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">subset_leq_card</span>/<span class="id" title="lemma">subsetP</span>=&gt; <span class="id" title="var">i</span>.<br/>
<span class="id" title="tactic">elim</span>: <span class="id" title="notation">#|</span><a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">|</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span> =&gt; /= [<span class="id" title="var">x</span> [<span class="id" title="var">s</span> <span class="id" title="var">l</span>]|<span class="id" title="var">n</span> <span class="id" title="var">IH</span> <span class="id" title="var">x</span> [<span class="id" title="var">s</span> <span class="id" title="var">l</span>]]/=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">leqn0</span> =&gt; /<span class="id" title="lemma">eqP</span>/<span class="id" title="lemma">cards0_eq</span>-&gt; [<span class="id" title="var">HUl</span> <span class="id" title="var">HS</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
<span class="id" title="var">have</span> [<span class="id" title="var">xIs</span> <span class="id" title="var">Hl</span> [<span class="id" title="var">HUl</span> <span class="id" title="var">HS</span>]/=|<span class="id" title="var">xNIs</span> <span class="id" title="var">Hl</span> [<span class="id" title="var">HUl</span> <span class="id" title="var">HS</span>]//] := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#boolP"><span class="id" title="lemma">boolP</span></a> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s</span>).<br/>
<span class="id" title="tactic">set</span> <span class="id" title="var">p</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">set</span> <span class="id" title="var">F</span> := <a class="idref" href="chip.kosaraju.html#rpdfs"><span class="id" title="definition">rpdfs</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">set</span> <span class="id" title="var">L</span> := <span class="id" title="definition">rgraph</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">have</span>: <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">[/\</span></a> <span class="id" title="notation">#|</span><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><span class="id" title="notation">|</span> <span class="id" title="notation">&lt;</span> <span class="id" title="notation">#|</span><span class="id" title="var">s</span><span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">&amp;</span></a> <span class="id" title="definition">uniq</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">l2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">[/\</span></a>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">notin</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">(</span><span class="id" title="var">s</span> <span class="id" title="notation">:\</span> <span class="id" title="var">x</span><span class="id" title="notation">)</span> <span class="id" title="notation">:\:</span> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">z</span> <span class="id" title="notation">in</span> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><span class="id" title="notation">]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a> <span class="id" title="notation">++</span> <span class="id" title="var">l</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#9d4b406f2baf3b916e4bed76250edf1e"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#9d4b406f2baf3b916e4bed76250edf1e"><span class="id" title="notation">[</span></a><span class="id" title="notation">[</span><span class="id" title="notation">predD1</span> <span class="id" title="var">s</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span><span class="id" title="notation">]</span><a class="idref" href="chip.kosaraju.html#9d4b406f2baf3b916e4bed76250edf1e"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a><a class="idref" href="chip.kosaraju.html#9d4b406f2baf3b916e4bed76250edf1e"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span> <a class="idref" href="chip.kosaraju.html#15923649c609b9fa64e0d7caffe99726"><span class="id" title="notation">-[</span></a><span class="id" title="notation">[</span><span class="id" title="notation">predD1</span> <span class="id" title="var">s</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span><span class="id" title="notation">]</span><a class="idref" href="chip.kosaraju.html#15923649c609b9fa64e0d7caffe99726"><span class="id" title="notation">]-&gt;</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b76985613d3b3ca583bb3217c76109bb"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span> =&gt; // | <span class="id" title="tactic">exists</span> <span class="id" title="notation">[::]</span>; <span class="id" title="tactic">split</span> =&gt; //=].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">p</span> /= [<span class="id" title="notation">#|</span><span class="id" title="var">s</span><span class="id" title="notation">|</span>](<span class="id" title="lemma">cardsD1</span> <span class="id" title="var">x</span>) <span class="id" title="var">xIs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> <span class="id" title="abbreviation">eqxx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">setD0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span>: <a class="idref" href="chip.connect.html#tsorted_nil"><span class="id" title="lemma">tsorted_nil</span></a>.<br/>
<span class="id" title="var">have</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a> <span class="id" title="var">x</span> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">notin</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">L</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">y</span>; <span class="id" title="tactic">rewrite</span> [<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="definition">rgraph</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<span class="id" title="lemma">rgraphK</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbC"><span class="id" title="lemma">orbC</span></a> =&gt; -&gt;.<br/>
<span class="id" title="var">have</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">L</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a> <span class="id" title="var">x</span> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">y</span>; <span class="id" title="tactic">rewrite</span> [<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="definition">rgraph</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<span class="id" title="lemma">rgraphK</span>.<br/>
<span class="id" title="tactic">rewrite</span> {}/<span class="id" title="var">p</span>.<br/>
<span class="id" title="tactic">elim</span>: <span class="id" title="var">L</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[[<span class="id" title="var">s1</span> <span class="id" title="var">l1</span>] /= <span class="id" title="var">_</span> <span class="id" title="var">yIp</span> [[<span class="id" title="var">sSs1</span> <span class="id" title="var">Ul1</span>] [<span class="id" title="var">l2</span> [<span class="id" title="var">xIs1</span> <span class="id" title="var">s1E</span> <span class="id" title="var">l1E</span> <span class="id" title="var">Rwl2</span> <span class="id" title="var">xCy</span>]]]|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span> <span class="id" title="var">l'</span> <span class="id" title="var">IH1</span> [<span class="id" title="var">s1</span> <span class="id" title="var">l1</span>] /= <span class="id" title="var">Rx</span> <span class="id" title="var">yIp</span> [[<span class="id" title="var">sSs1</span> <span class="id" title="var">Ul1</span>] [<span class="id" title="var">l2</span> [<span class="id" title="var">xIs1</span> <span class="id" title="var">s1E</span> <span class="id" title="var">l1E</span> <span class="id" title="var">Rwl2</span> <span class="id" title="var">xCy</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span>=&gt; // |<span class="id" title="tactic">exists</span> (<span class="id" title="var">x</span> <span class="id" title="notation">::</span> <span class="id" title="var">l2</span>); <span class="id" title="tactic">split</span>] =&gt; // [||||||<span class="id" title="var">y</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">subset_leqif_cards</span> // <span class="id" title="var">s1E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="lemma">subset_trans</span> (<span class="id" title="lemma">subsetDl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<span class="id" title="lemma">subD1set</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ul1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbT"><span class="id" title="lemma">andbT</span></a> <span class="id" title="var">l1E</span> <span class="id" title="lemma">mem_cat</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_or"><span class="id" title="lemma">negb_or</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> [/= <span class="id" title="var">Dl2</span> <span class="id" title="var">_</span>] := <span class="id" title="var">Rwl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> /<span class="id" title="lemma">subsetP</span>/(<span class="id" title="var">_</span> <span class="id" title="var">x</span>)/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#implyP"><span class="id" title="lemma">implyP</span></a>/=  := <span class="id" title="var">Dl2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> /= <span class="id" title="abbreviation">eqxx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#implybF"><span class="id" title="lemma">implybF</span></a> =&gt; -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span>  /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#implyP"><span class="id" title="lemma">implyP</span></a> := <span class="id" title="var">HS</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> <span class="id" title="var">xIs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#implybF"><span class="id" title="lemma">implybF</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> <span class="id" title="abbreviation">eqxx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span> =&gt; <span class="id" title="var">z</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_or"><span class="id" title="lemma">negb_or</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbC"><span class="id" title="lemma">andbC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbAC"><span class="id" title="lemma">andbAC</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#tsorted_cons_r"><span class="id" title="lemma">tsorted_cons_r</span></a> =&gt; // [<span class="id" title="var">y</span> <span class="id" title="var">yInl2</span>|<span class="id" title="var">y</span> /<span class="id" title="var">yIp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="chip.connect.html#connect_to_C1_id"><span class="id" title="lemma">connect_to_C1_id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="lemma">eq_connect</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#aed478b27f23b4f753c27c8ac393febc"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#c717e24548d7d4d1086535addc681262"><span class="id" title="notation">=2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#c717e24548d7d4d1086535addc681262"><span class="id" title="notation">(</span></a><a class="idref" href="chip.extra.html#relto"><span class="id" title="definition">relto</span></a> <span class="id" title="notation">[</span><span class="id" title="notation">predD1</span> <span class="id" title="var">s</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">x</span><span class="id" title="notation">]</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#c717e24548d7d4d1086535addc681262"><span class="id" title="notation">)</span></a>)) ?<span class="id" title="var">xCy</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">x1</span> <span class="id" title="var">y1</span>; <span class="id" title="tactic">rewrite</span> /= !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbA"><span class="id" title="lemma">andbA</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbF"><span class="id" title="lemma">orbF</span></a> <span class="id" title="var">s1E</span> 3!<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_and"><span class="id" title="lemma">negb_and</span></a> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negbK"><span class="id" title="lemma">negbK</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_and"><span class="id" title="lemma">negb_and</span></a> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[] /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negPf"><span class="id" title="lemma">negPf</span></a>-&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|<span class="id" title="var">yIl2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="lemma">connect0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#connect_to_sub"><span class="id" title="lemma">connect_to_sub</span></a> (<span class="id" title="var">xCy</span> <span class="id" title="var">_</span> <span class="id" title="var">yIl2</span>); <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">subsetP</span> =&gt; <span class="id" title="var">i</span> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
<span class="id" title="var">have</span> <span class="id" title="var">F1</span> : <span class="id" title="notation">#|</span><span class="id" title="var">s1</span><span class="id" title="notation">|</span> <span class="id" title="notation">&lt;=</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">ltnS</span> (<span class="id" title="lemma">leq_trans</span> <span class="id" title="var">_</span> <span class="id" title="var">Hl</span>).<br/>
<span class="id" title="var">have</span> <span class="id" title="var">F2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="notation">~:</span> <span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> <span class="id" title="lemma">mem_cat</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[-&gt;//|/<span class="id" title="var">HS</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negPf"><span class="id" title="lemma">negPf</span></a>-&gt;; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbF"><span class="id" title="lemma">andbF</span></a>.<br/>
<span class="id" title="var">have</span> := <span class="id" title="var">IH</span> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">F1</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Ul1</span> <span class="id" title="var">F2</span>).<br/>
<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">F</span> /=; <span class="id" title="tactic">case</span>: <a class="idref" href="chip.kosaraju.html#rpdfs"><span class="id" title="definition">rpdfs</span></a> =&gt; <span class="id" title="var">s3</span> <span class="id" title="var">l3</span> /= <span class="id" title="var">Hv</span>.<br/>
<span class="id" title="tactic">apply</span>: <span class="id" title="var">IH1</span> =&gt; [<span class="id" title="var">z</span> <span class="id" title="var">zIl</span>|<span class="id" title="var">z</span> <span class="id" title="var">Rxz</span> /=|]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="var">Rx</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> <span class="id" title="var">zIl</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#boolP"><span class="id" title="lemma">boolP</span></a> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s1</span>)) <span class="id" title="var">Hv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">yIs1</span>/= [[<span class="id" title="var">Ss1s3</span> <span class="id" title="var">Ul3</span>] [<span class="id" title="var">l4</span> [<span class="id" title="var">yIl4</span> <span class="id" title="var">s3E</span> <span class="id" title="var">l3E</span> <span class="id" title="var">Rwl4</span> <span class="id" title="var">Cyz</span>]]]<br/>
       |<span class="id" title="var">yNIs1</span>/= [-&gt; <span class="id" title="var">_</span>]]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>: (<span class="id" title="var">yIp</span> <span class="id" title="var">_</span> <span class="id" title="var">Rxz</span>) =&gt; [-&gt;//|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|-&gt;]; [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">yNIs1</span>|<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">s3E</span> !<span class="id" title="definition">inE</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_and"><span class="id" title="lemma">negb_and</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>: (<span class="id" title="var">yIp</span> <span class="id" title="var">_</span> <span class="id" title="var">Rxz</span>) =&gt; [-&gt;//|]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|-&gt;]; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">yIl4</span>.<br/>
<span class="id" title="tactic">case</span>: (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#boolP"><span class="id" title="lemma">boolP</span></a> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s1</span>)) <span class="id" title="var">Hv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">yIs1</span> [[<span class="id" title="var">Ss1s3</span> <span class="id" title="var">Ul3</span>] [<span class="id" title="var">l4</span> [<span class="id" title="var">yIl4</span> <span class="id" title="var">s3E</span> <span class="id" title="var">l3E</span> <span class="id" title="var">Rwl4</span> <span class="id" title="var">Cyz</span>]]]<br/>
      |<span class="id" title="var">yNIs1</span> [-&gt; -&gt;]]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>=&gt; //; <span class="id" title="tactic">exists</span> <span class="id" title="var">l2</span>; <span class="id" title="tactic">split</span>.<br/>
<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span>=&gt; //= | <span class="id" title="tactic">exists</span> (<span class="id" title="var">l4</span> <span class="id" title="notation">++</span> <span class="id" title="var">l2</span>); <span class="id" title="tactic">split</span> =&gt; //= [||||<span class="id" title="var">z</span>]].<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="lemma">leq_ltn_trans</span> <span class="id" title="var">Ss1s3</span> <span class="id" title="var">_</span>.<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s3E</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> <span class="id" title="abbreviation">eqxx</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbF"><span class="id" title="lemma">andbF</span></a>.<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span> =&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s3E</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> <span class="id" title="lemma">mem_cat</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_or"><span class="id" title="lemma">negb_or</span></a> -!<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbA"><span class="id" title="lemma">andbA</span></a>.<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l3E</span> <span class="id" title="var">l1E</span> <span class="id" title="lemma">catA</span>.<br/>
- <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#tsorted_cat"><span class="id" title="lemma">tsorted_cat</span></a> =&gt; //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#eq_tsorted"><span class="id" title="lemma">eq_tsorted</span></a> <span class="id" title="var">Rwl4</span> =&gt; <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">mem_cat</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[] <span class="id" title="var">zIl4</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="var">xCy</span>.<br/>
<span class="id" title="tactic">apply</span>: <span class="id" title="lemma">connect_trans</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#aed478b27f23b4f753c27c8ac393febc"><span class="id" title="notation">:</span></a> <span class="id" title="var">y</span> <a class="idref" href="chip.kosaraju.html#15923649c609b9fa64e0d7caffe99726"><span class="id" title="notation">-[</span></a><span class="id" title="var">_</span><a class="idref" href="chip.kosaraju.html#15923649c609b9fa64e0d7caffe99726"><span class="id" title="notation">]-&gt;</span></a> <span class="id" title="var">z</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#connect_to_sub"><span class="id" title="lemma">connect_to_sub</span></a> (<span class="id" title="var">Cyz</span> <span class="id" title="var">_</span> <span class="id" title="var">zIl4</span>); <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">subsetP</span> =&gt; <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#connect_to1"><span class="id" title="lemma">connect_to1</span></a> (<span class="id" title="var">Rx</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> ?<span class="id" title="abbreviation">eqxx</span> //.<br/>
<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">yIs1</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s1E</span> !<span class="id" title="definition">inE</span>=&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a>[<span class="id" title="var">_</span> -&gt;].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="pdfs_connect"><span class="id" title="lemma">pdfs_connect</span></a> <span class="id" title="var">s</span> <span class="id" title="var">x</span> : <br/>
&nbsp;&nbsp;<a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">s1</span>, <span class="id" title="var">l1</span>) := <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">[::]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">[/\</span></a> <span class="id" title="definition">uniq</span> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#s1"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">:\:</span> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">z</span> <span class="id" title="notation">in</span> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a><span class="id" title="notation">]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">subset</span> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="chip.kosaraju.html#15923649c609b9fa64e0d7caffe99726"><span class="id" title="notation">-[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">pred</span></a> <span class="id" title="var">u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#7b6257ffc80683f59381cd58d26a8458"><span class="id" title="notation">]</span></a><a class="idref" href="chip.kosaraju.html#15923649c609b9fa64e0d7caffe99726"><span class="id" title="notation">]-&gt;</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#554fc3f3cf0a27fe0863b7741d119014"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">xIs</span>.<br/>
<span class="id" title="tactic">set</span> <span class="id" title="var">p</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="var">have</span> <span class="id" title="var">UN</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">[/\</span></a> <span class="id" title="definition">uniq</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="notation">~:</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#53e4c1e546d9b20e029d981f761726c2"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">by</span> [].<br/>
<span class="id" title="tactic">case</span>: <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> (<a class="idref" href="chip.kosaraju.html#pdfs_correct"><span class="id" title="lemma">pdfs_correct</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">x</span> <span class="id" title="var">UN</span>) =&gt; <span class="id" title="var">s1</span> <span class="id" title="var">l1</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">xIs</span> =&gt; /=[[[<span class="id" title="var">_</span> <span class="id" title="var">Ul1</span>] [<span class="id" title="var">l2</span> [<span class="id" title="var">xIl2</span> <span class="id" title="var">s1E</span> <span class="id" title="var">l1E</span> <span class="id" title="var">WH</span> <span class="id" title="var">Cy</span>]]]].<br/>
<span class="id" title="tactic">split</span> =&gt; // [||<span class="id" title="var">y</span>].<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s1E</span> <span class="id" title="var">l1E</span> !<span class="id" title="definition">inE</span> <span class="id" title="lemma">cats0</span>.<br/>
- <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">subsetP</span>=&gt; <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span> <span class="id" title="lemma">cats0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">have</span> [/<span class="id" title="lemma">subsetP</span>/(<span class="id" title="var">_</span> <span class="id" title="var">z</span>)/=] := <span class="id" title="var">WH</span>.<br/>
<span class="id" title="tactic">apply</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a>/<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a> =&gt; [|<span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span> <span class="id" title="lemma">cats0</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">Cy</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">l1E</span> <span class="id" title="lemma">cats0</span>.<br/>
<span class="id" title="tactic">by</span> <span class="id" title="var">have</span> [<span class="id" title="var">_</span> /(<span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">xIl2</span> <span class="id" title="var">H</span>)] := <span class="id" title="var">WH</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;sequence&nbsp;is&nbsp;topologically&nbsp;sorted&nbsp;and&nbsp;contains&nbsp;all&nbsp;the&nbsp;nodes&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a name="tseq_correct"><span class="id" title="lemma">tseq_correct</span></a> : <a class="idref" href="chip.kosaraju.html#aa17ca1b653973869f57d008f0978b7f"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#aa17ca1b653973869f57d008f0978b7f"><span class="id" title="notation">[</span></a><a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a>)<a class="idref" href="chip.kosaraju.html#aa17ca1b653973869f57d008f0978b7f"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">suff</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">[/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">setT</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#aed478b27f23b4f753c27c8ac393febc"><span class="id" title="notation">:</span></a> <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">}</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">[::]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="chip.kosaraju.html#aa17ca1b653973869f57d008f0978b7f"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#aa17ca1b653973869f57d008f0978b7f"><span class="id" title="notation">[</span></a><a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a>)<a class="idref" href="chip.kosaraju.html#aa17ca1b653973869f57d008f0978b7f"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>, <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">enum</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a>  <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack.r"><span class="id" title="variable">r</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>=&gt; <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">split</span> =&gt; // <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> // <span class="id" title="lemma">mem_enum</span>.<br/>
<span class="id" title="tactic">rewrite</span> /<a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a>; <span class="id" title="tactic">set</span> <span class="id" title="var">F</span> := <span class="id" title="definition">foldl</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">set</span> <span class="id" title="var">p</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="var">have</span> : <a class="idref" href="chip.kosaraju.html#aa17ca1b653973869f57d008f0978b7f"><span class="id" title="notation">TS</span></a><a class="idref" href="chip.kosaraju.html#aa17ca1b653973869f57d008f0978b7f"><span class="id" title="notation">[</span></a><span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><a class="idref" href="chip.kosaraju.html#aa17ca1b653973869f57d008f0978b7f"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#tsorted_nil"><span class="id" title="lemma">tsorted_nil</span></a>.<br/>
<span class="id" title="var">have</span>: <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">~:</span> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">x</span> <span class="id" title="notation">in</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> /= !<span class="id" title="definition">inE</span>.<br/>
<span class="id" title="var">have</span>: <span class="id" title="definition">uniq</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <span class="id" title="tactic">by</span> [].<br/>
<span class="id" title="tactic">elim</span>: (<span class="id" title="abbreviation">enum</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>) <span class="id" title="var">p</span> =&gt; /= [|<span class="id" title="var">y</span> <span class="id" title="var">l</span> <span class="id" title="var">IH</span> [<span class="id" title="var">s1</span> <span class="id" title="var">l1</span>] <span class="id" title="var">HUl1</span> /= <span class="id" title="var">Hi</span> <span class="id" title="var">Rw</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>.<br/>
<span class="id" title="var">have</span> <span class="id" title="var">HS</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">subset</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="notation">~:</span> <span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#ca592708f529c7c7ee5f3dbd6cf93463"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hi</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negbK"><span class="id" title="lemma">negbK</span></a>.<br/>
<span class="id" title="var">have</span> :=  <a class="idref" href="chip.kosaraju.html#pdfs_correct"><span class="id" title="lemma">pdfs_correct</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">y</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">HUl1</span> <span class="id" title="var">HS</span>).<br/>
<span class="id" title="var">have</span> [<span class="id" title="var">yIs1</span>|<span class="id" title="var">yNIs1</span>] := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#boolP"><span class="id" title="lemma">boolP</span></a> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s1</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> =&gt; <span class="id" title="var">s2</span> <span class="id" title="var">l2</span> [-&gt; -&gt;].<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> /= [<span class="id" title="var">Sl2</span> <span class="id" title="var">HR</span> <span class="id" title="var">xI</span>] := <span class="id" title="var">IH</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">HUl1</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Rw</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> =&gt; // <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|<span class="id" title="var">xIl</span>]; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="var">xI</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <span class="id" title="var">Sl2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">yNIs1</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hi</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negbK"><span class="id" title="lemma">negbK</span></a>.<br/>
<span class="id" title="tactic">case</span>: <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> =&gt; <span class="id" title="var">s2</span> <span class="id" title="var">l2</span> /= [[<span class="id" title="var">Ss1s2</span> <span class="id" title="var">Ul2</span>] [<span class="id" title="var">l3</span> [<span class="id" title="var">yIl3</span> <span class="id" title="var">s2E</span> <span class="id" title="var">l2E</span> <span class="id" title="var">RWl3</span> <span class="id" title="var">Cyz</span>]]].<br/>
<span class="id" title="tactic">case</span>: (<span class="id" title="var">IH</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) =&gt; //= [|| <span class="id" title="var">Sl2F</span> <span class="id" title="var">RwF</span> <span class="id" title="var">FI</span>].<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">setP</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s2E</span> <span class="id" title="var">Hi</span> <span class="id" title="var">l2E</span> !<span class="id" title="definition">inE</span> <span class="id" title="lemma">mem_cat</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_or"><span class="id" title="lemma">negb_or</span></a>.<br/>
- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l2E</span>; <span class="id" title="tactic">apply</span>: (<a class="idref" href="chip.connect.html#tsorted_cat"><span class="id" title="lemma">tsorted_cat</span></a> <span class="id" title="var">Rw</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#eq_tsorted"><span class="id" title="lemma">eq_tsorted</span></a> <span class="id" title="var">RWl3</span> =&gt; <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">Hi</span> !<span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbT"><span class="id" title="lemma">andbT</span></a>.<br/>
<span class="id" title="tactic">split</span>=&gt; // [<span class="id" title="var">i</span> <span class="id" title="var">iIl1</span>|<span class="id" title="var">x</span>]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Sl2F</span> // <span class="id" title="var">l2E</span> <span class="id" title="lemma">mem_cat</span> <span class="id" title="var">iIl1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|//]; <span class="id" title="var">last</span> <span class="id" title="tactic">exact</span>: <span class="id" title="var">FI</span>.<br/>
<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="var">Sl2F</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">l2E</span> <span class="id" title="lemma">mem_cat</span> <span class="id" title="var">yIl3</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Stack"><span class="id" title="section">Stack</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Kosaraju.Program"><span class="id" title="section">Program</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variable</span> <a name="Kosaraju.Program.r"><span class="id" title="variable">r</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#rel"><span class="id" title="definition">rel</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="kosaraju"><span class="id" title="definition">kosaraju</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> := <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">rel</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">|</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">(</span></a><span class="id" title="definition">foldl</span>  (<span class="id" title="keyword">fun</span> (<span class="id" title="var">p</span> : <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a><span class="id" title="notation">}</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="abbreviation">seq</span> (<span class="id" title="abbreviation">seq</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>)) <span class="id" title="var">x</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">if</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#c1ad6bcc76a6221225111f87bc3b0c3d"><span class="id" title="notation">notin</span></a> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">then</span></a> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">else</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p1</span> := <a class="idref" href="chip.kosaraju.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">[::]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="tactic">in</span>  <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#p1"><span class="id" title="variable">p1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#p1"><span class="id" title="variable">p1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <span class="id" title="notation">::</span> <a class="idref" href="chip.kosaraju.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">setT</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">[::]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">).2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="kosaraju_correct"><span class="id" title="lemma">kosaraju_correct</span></a> :<br/>
&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="definition">flatten</span> <a class="idref" href="chip.kosaraju.html#kosaraju"><span class="id" title="definition">kosaraju</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">[/\</span></a> <span class="id" title="definition">uniq</span> <a class="idref" href="chip.kosaraju.html#l"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span>, <a class="idref" href="chip.kosaraju.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">c</span> : <span class="id" title="abbreviation">seq</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>, <a class="idref" href="chip.kosaraju.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#kosaraju"><span class="id" title="definition">kosaraju</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="chip.kosaraju.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="definition">connect</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <span class="id" title="definition">connect</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">rewrite</span> /<a class="idref" href="chip.kosaraju.html#kosaraju"><span class="id" title="definition">kosaraju</span></a>.<br/>
<span class="id" title="tactic">set</span> <span class="id" title="var">f</span> := <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">rel</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">|</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="tactic">set</span> <span class="id" title="var">g</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">if</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">then</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#00a1a5b58aac8f1e3f1abff064a39f9d"><span class="id" title="notation">else</span></a> <span class="id" title="var">_</span>.<br/>
<span class="id" title="tactic">set</span> <span class="id" title="var">p</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="var">have</span>: <span class="id" title="definition">uniq</span> (<span class="id" title="definition">flatten</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a>) <span class="id" title="tactic">by</span> [].<br/>
<span class="id" title="var">have</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">c</span>, <a class="idref" href="chip.kosaraju.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="notation">(</span><span class="id" title="definition">flatten</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">++</span> <span class="id" title="notation">(</span><a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a>)<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt;<span class="id" title="var">c</span>; <span class="id" title="tactic">case</span>: (<a class="idref" href="chip.kosaraju.html#tseq_correct"><span class="id" title="lemma">tseq_correct</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a>) =&gt; <span class="id" title="var">_</span> /(<span class="id" title="var">_</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="var">have</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">c</span>, <a class="idref" href="chip.kosaraju.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="chip.kosaraju.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">(</span></a><a class="idref" href="chip.connect.html#diconnect"><span class="id" title="definition">diconnect</span></a> (<a class="idref" href="chip.extra.html#relto"><span class="id" title="definition">relto</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#predT"><span class="id" title="definition">predT</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a>) <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">by</span> [].<br/>
<span class="id" title="var">have</span>: <span class="id" title="notation">~:</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <span class="id" title="definition">flatten</span> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#675082cc4d4538da052b547bdc6ea4c9"><span class="id" title="notation">.2</span></a>.<br/>
&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> <span class="id" title="lemma">in_nil</span>.<br/>
<span class="id" title="var">have</span>: <a class="idref" href="chip.connect.html#tsorted"><span class="id" title="definition">tsorted</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#predT"><span class="id" title="definition">predT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssreflect.html#aed478b27f23b4f753c27c8ac393febc"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#pred"><span class="id" title="definition">pred</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.T"><span class="id" title="variable">T</span></a>) <span class="id" title="notation">[</span><span class="id" title="notation">seq</span> <span class="id" title="var">i</span> <span class="id" title="notation">&lt;-</span> <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a>) <span class="id" title="notation">|</span> <a class="idref" href="chip.kosaraju.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span>-&gt;: <span class="id" title="notation">[</span><span class="id" title="notation">seq</span> <span class="id" title="var">i</span> <span class="id" title="notation">&lt;-</span> <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a>) <span class="id" title="notation">|</span> <a class="idref" href="chip.kosaraju.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrfun.html#e0817251e7d67ad994b4d9b1aa82a412"><span class="id" title="notation">.1</span></a><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> (<span class="id" title="definition">rgraph</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">all_filterP</span>/<span class="id" title="lemma">allP</span>=&gt; <span class="id" title="var">y</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>: (<a class="idref" href="chip.kosaraju.html#tseq_correct"><span class="id" title="lemma">tseq_correct</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="tactic">elim</span>: <a class="idref" href="chip.kosaraju.html#tseq"><span class="id" title="definition">tseq</span></a> <span class="id" title="var">p</span> =&gt; [[<span class="id" title="var">s</span> <span class="id" title="var">l</span>]/= <span class="id" title="var">HR</span> <span class="id" title="var">HI</span> <span class="id" title="var">HE</span> <span class="id" title="var">HFI</span> <span class="id" title="var">HUF</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>=&gt; // <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">have</span> := <span class="id" title="var">HFI</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cats0</span>.<br/>
<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">x</span> <span class="id" title="var">l</span> <span class="id" title="var">IH</span> [<span class="id" title="var">s1</span> <span class="id" title="var">l1</span>] <span class="id" title="var">HR</span> <span class="id" title="var">HI</span> <span class="id" title="var">HE</span> <span class="id" title="var">HFI</span> <span class="id" title="var">HUF</span>.<br/>
<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">g</span> /<span class="id" title="var">f</span> /=.<br/>
<span class="id" title="var">have</span> [<span class="id" title="var">xIs1</span>|<span class="id" title="var">xNIs1</span>] := <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#boolP"><span class="id" title="lemma">boolP</span></a> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s1</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <span class="id" title="var">IH</span> =&gt; //= [|<span class="id" title="var">i</span>]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">HR</span>; <span class="id" title="tactic">rewrite</span> /= (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negPf"><span class="id" title="lemma">negPf</span></a> <span class="id" title="var">xNIs1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span>:= <span class="id" title="var">HFI</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">mem_cat</span> <span class="id" title="definition">inE</span> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>: <span class="id" title="lemma">eqP</span> =&gt; //-&gt;; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">HI</span> !<span class="id" title="definition">inE</span> <span class="id" title="var">xNIs1</span>.<br/>
<span class="id" title="var">have</span> := (@<a class="idref" href="chip.kosaraju.html#pdfs_connect"><span class="id" title="lemma">pdfs_connect</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">rel</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">|</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a> <a class="idref" href="chip.kosaraju.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="chip.kosaraju.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#fea9f4d81fed4d4bd9309c8e510110f0"><span class="id" title="notation">]</span></a>) <span class="id" title="var">s1</span> <span class="id" title="var">x</span> <span class="id" title="var">xIs1</span>).<br/>
<span class="id" title="tactic">case</span>: <a class="idref" href="chip.kosaraju.html#pdfs"><span class="id" title="definition">pdfs</span></a> =&gt; <span class="id" title="var">s2</span> <span class="id" title="var">l2</span> /= [<span class="id" title="var">Ul2</span> <span class="id" title="var">s2E</span> <span class="id" title="var">Dl2</span> <span class="id" title="var">xCy</span>].<br/>
<span class="id" title="tactic">move</span>: <span class="id" title="var">HR</span>; <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">xIs1</span>; <span class="id" title="tactic">set</span> <span class="id" title="var">L</span> := <span class="id" title="notation">[</span><span class="id" title="notation">seq</span> <span class="id" title="var">_</span> <span class="id" title="notation">&lt;-</span> <span class="id" title="var">_</span> <span class="id" title="notation">|</span> <span class="id" title="var">_</span><span class="id" title="notation">]</span> =&gt; <span class="id" title="var">HR</span>.<br/>
<span class="id" title="var">have</span> <span class="id" title="var">l2R</span> : <span class="id" title="var">l2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">(</span></a><a class="idref" href="chip.connect.html#diconnect"><span class="id" title="definition">diconnect</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">xCy</span> -(@<a class="idref" href="chip.connect.html#connect_to_rev"><span class="id" title="lemma">connect_to_rev</span></a> <span class="id" title="var">_</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a> <span class="id" title="var">L</span> <span class="id" title="abbreviation">setT</span>) //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<a class="idref" href="chip.connect.html#tsorted_diconnect"><span class="id" title="lemma">tsorted_diconnect</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#topredE"><span class="id" title="lemma">topredE</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#eq_diconnect"><span class="id" title="lemma">eq_diconnect</span></a> =&gt; <span class="id" title="var">i</span> <span class="id" title="var">j</span>; <span class="id" title="tactic">rewrite</span> /= !<span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#eq_tsorted"><span class="id" title="lemma">eq_tsorted</span></a> <span class="id" title="var">HR</span> =&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span>  !<span class="id" title="definition">inE</span> //= <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#topredE"><span class="id" title="lemma">topredE</span></a> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">subsetP</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> /= !<span class="id" title="definition">inE</span> <span class="id" title="lemma">mem_filter</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> := <span class="id" title="var">HFI</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> /= <span class="id" title="lemma">mem_cat</span> -<span class="id" title="var">HI</span> /= !<span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: (<span class="id" title="var">_</span> <span class="id" title="notation">=</span><span class="id" title="notation">P</span> <span class="id" title="var">_</span>) =&gt; [-&gt;|] /=; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">xIs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>: (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#eq_tsorted"><span class="id" title="lemma">eq_tsorted</span></a> <span class="id" title="var">HR</span> =&gt; <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> // <span class="id" title="definition">inE</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#topredE"><span class="id" title="lemma">topredE</span></a> <span class="id" title="definition">inE</span>.<br/>
<span class="id" title="tactic">apply</span>: <span class="id" title="var">IH</span> =&gt; [|<span class="id" title="var">i</span>|<span class="id" title="var">i</span>|<span class="id" title="var">i</span>|] //=.<br/>
- <span class="id" title="var">suff</span>-&gt;: <span class="id" title="notation">[</span><span class="id" title="notation">seq</span> <span class="id" title="var">i</span> <span class="id" title="notation">&lt;-</span> <span class="id" title="var">l</span> <span class="id" title="notation">|</span> <a class="idref" href="chip.kosaraju.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">s2</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[</span><span class="id" title="notation">seq</span> <span class="id" title="var">i</span> <span class="id" title="notation">&lt;-</span> <span class="id" title="var">x</span> <span class="id" title="notation">::</span> <span class="id" title="var">L</span> <span class="id" title="notation">|</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="chip.connect.html#diconnect"><span class="id" title="definition">diconnect</span></a> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program.r"><span class="id" title="variable">r</span></a> <span class="id" title="var">x</span> <a class="idref" href="chip.kosaraju.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="chip.connect.html#tsorted_inv"><span class="id" title="lemma">tsorted_inv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <a class="idref" href="chip.connect.html#diconnect0"><span class="id" title="lemma">diconnect0</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">filter_predI</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <span class="id" title="lemma">eq_filter</span> =&gt; <span class="id" title="var">y</span> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s2E</span> !<span class="id" title="definition">inE</span> <span class="id" title="var">l2R</span>.<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">s2E</span> !<span class="id" title="lemma">mem_cat</span> !<span class="id" title="definition">inE</span> -<span class="id" title="var">HI</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negb_and"><span class="id" title="lemma">negb_and</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#negbK"><span class="id" title="lemma">negbK</span></a> <span class="id" title="definition">inE</span>.<br/>
- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>[/<span class="id" title="lemma">eqP</span>-&gt;|//]; [<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span> | <span class="id" title="tactic">apply</span>: <span class="id" title="var">HE</span>].<br/>
- <span class="id" title="var">have</span>:= <span class="id" title="var">HFI</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= !<span class="id" title="lemma">mem_cat</span> !<span class="id" title="definition">inE</span> =&gt; /<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#or3P"><span class="id" title="lemma">or3P</span></a>[-&gt;|/<span class="id" title="lemma">eqP</span>-&gt;|-&gt;].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">xCy</span> <span class="id" title="lemma">connect0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#orbT"><span class="id" title="lemma">orbT</span></a>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">cat_uniq</span> <span class="id" title="var">Ul2</span> <span class="id" title="var">HUF</span> /= <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#andbT"><span class="id" title="lemma">andbT</span></a>.<br/>
<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">hasPn</span> =&gt; <span class="id" title="var">i</span> /=.<br/>
<span class="id" title="var">have</span>/<span class="id" title="lemma">subsetP</span>/(<span class="id" title="var">_</span> <span class="id" title="var">i</span>)/= := <span class="id" title="var">Dl2</span>.<br/>
<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">HI</span> /= !<span class="id" title="definition">inE</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">case</span>: (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.9.1/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="chip.kosaraju.html#Kosaraju.Program"><span class="id" title="section">Program</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="chip.kosaraju.html#Kosaraju"><span class="id" title="section">Kosaraju</span></a>.<br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
